<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Marguerite Butler">
<meta name="dcterms.date" content="2025-05-01">
<meta name="description" content="Mapping in R">
<title>Spatial Data – ZOOL710 Data Science in R for Biologists 2025</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-2c128a76c5dbb243be50ea3089ffe19d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="../../styles.css">
</head>
<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">ZOOL710 Data Science in R for Biologists 2025</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-general-information" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">General Information</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-general-information">
<li>
    <a class="dropdown-item" href="../../syllabus.html">
 <span class="dropdown-text">Syllabus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../schedule.html">
 <span class="dropdown-text">Schedule</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-course-materials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Course Materials</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-course-materials">
<li>
    <a class="dropdown-item" href="../../lectures.html">
 <span class="dropdown-text">Lectures</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../projects.html">
 <span class="dropdown-text">Projects</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../resources.html">
 <span class="dropdown-text">Resources</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mbutler808"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/mbutler808"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Spatial Data</h1>
                  <div>
        <div class="description">
          Mapping in R
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">module 8</div>
                <div class="quarto-category">week 15</div>
                <div class="quarto-category">sf</div>
                <div class="quarto-category">shapefiles</div>
                <div class="quarto-category">ggplot2</div>
                <div class="quarto-category">maps</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author"><a href="https://butlerlab.org">Marguerite Butler</a> </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              School of Life Sciences, University of Hawaii
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 1, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#acknowledgements" id="toc-acknowledgements" class="nav-link active" data-scroll-target="#acknowledgements">Acknowledgements</a></li>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link" data-scroll-target="#learning-objectives">Learning objectives</a></li>
  <li>
<a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">Overview</a>
  <ul class="collapse">
<li>
<a href="#maps" id="toc-maps" class="nav-link" data-scroll-target="#maps"><code>maps</code></a>
  <ul class="collapse">
<li><a href="#an-example-zooming-in-on-california" id="toc-an-example-zooming-in-on-california" class="nav-link" data-scroll-target="#an-example-zooming-in-on-california">An example zooming in on California</a></li>
  </ul>
</li>
  <li><a href="#sf-package" id="toc-sf-package" class="nav-link" data-scroll-target="#sf-package"><code>sf</code> package</a></li>
  <li><a href="#ng-map" id="toc-ng-map" class="nav-link" data-scroll-target="#ng-map">NG map</a></li>
  <li>
<a href="#add-points-to-map---first-get-data" id="toc-add-points-to-map---first-get-data" class="nav-link" data-scroll-target="#add-points-to-map---first-get-data">Add points to map - first get data</a>
  <ul class="collapse">
<li><a href="#want-to-make-a-zoomed-in-inset---identify-coordinates" id="toc-want-to-make-a-zoomed-in-inset---identify-coordinates" class="nav-link" data-scroll-target="#want-to-make-a-zoomed-in-inset---identify-coordinates">Want to make a zoomed-in inset - identify coordinates</a></li>
  <li><a href="#annotate-plot-with-a-rectangle-using-the-coordinates" id="toc-annotate-plot-with-a-rectangle-using-the-coordinates" class="nav-link" data-scroll-target="#annotate-plot-with-a-rectangle-using-the-coordinates">Annotate plot with a rectangle using the coordinates</a></li>
  <li><a href="#make-inset---basically-another-plot-zoomed-in" id="toc-make-inset---basically-another-plot-zoomed-in" class="nav-link" data-scroll-target="#make-inset---basically-another-plot-zoomed-in">Make inset - basically another plot zoomed in</a></li>
  <li><a href="#plot-the-baseplot" id="toc-plot-the-baseplot" class="nav-link" data-scroll-target="#plot-the-baseplot">Plot the baseplot</a></li>
  <li><a href="#write-to-an-external-file" id="toc-write-to-an-external-file" class="nav-link" data-scroll-target="#write-to-an-external-file">Write to an external file</a></li>
  </ul>
</li>
  </ul>
</li>
  <li><a href="#cool-tip" id="toc-cool-tip" class="nav-link" data-scroll-target="#cool-tip">Cool tip!</a></li>
  <li><a href="#great-mapping-blogs" id="toc-great-mapping-blogs" class="nav-link" data-scroll-target="#great-mapping-blogs">Great Mapping Blogs</a></li>
  </ul></nav>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><section id="acknowledgements" class="level3"><h3 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h3>
<p>References for this Material:</p>
<ul>
<li><p><code>maps</code>: https://eriqande.github.io/rep-res-web/lectures/making-maps-with-R.html</p></li>
<li><p><code>sf</code>: https://r-spatial.org/r/2018/10/25/ggplot2-sf.html</p></li>
</ul></section><section id="learning-objectives" class="level1"><h1>Learning objectives</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning objectives
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>At the end of this lesson you will:</strong></p>
<ul>
<li>Be familiar with spatial data in r, including using polygons and shapefiles</li>
<li>Understand how to subset and manipulate spatial data</li>
<li>Be able to create maps and data overlays in r</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
R packages you will need
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><code>maps</code></li>
<li><code>ggmap</code></li>
<li><code>sf</code></li>
<li><code>rnaturalearth</code></li>
<li><code>ggspatial</code></li>
<li><code>grid</code></li>
<li><code>scales</code></li>
<li><code>ggplot2</code></li>
<li><code>dplyr</code></li>
<li><code>magrittr</code></li>
</ul>
</div>
</div>
</section><section id="overview" class="level1"><h1>Overview</h1>
<p>There are many great resources to plot maps in R. The first step is to download or access the map information, commonly stored as shape data (type <code>.shp</code>) The older <code>maps</code> package creates polygons from coordinate data, whereas the <code>sf</code> package is used to read and work with shape data.</p>
<section id="maps" class="level2"><h2 class="anchored" data-anchor-id="maps"><code>maps</code></h2>
<p>Download states data and explore. It is a pretty simple to get the map data. It is a dataframe with a series of latitude and longitude data for each state. Essentially itʻs the points that define the outline of the state if you connect the dots.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">maps</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dkahle/ggmap">ggmap</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Google's Terms of Service: &lt;https://mapsplatform.google.com&gt;
  Stadia Maps' Terms of Service: &lt;https://stadiamaps.com/terms-of-service&gt;
  OpenStreetMap's Tile Usage Policy: &lt;https://operations.osmfoundation.org/policies/tiles&gt;
ℹ Please cite ggmap if you use it! Use `citation("ggmap")` for details.</code></pre>
</div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">states</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/map_data.html">map_data</a></span><span class="op">(</span><span class="st">"state"</span><span class="op">)</span> <span class="co"># get map data from maps package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">states</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15537     6</code></pre>
</div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">states</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       long      lat group order  region subregion
1 -87.46201 30.38968     1     1 alabama      &lt;NA&gt;
2 -87.48493 30.37249     1     2 alabama      &lt;NA&gt;
3 -87.52503 30.37249     1     3 alabama      &lt;NA&gt;
4 -87.53076 30.33239     1     4 alabama      &lt;NA&gt;
5 -87.57087 30.32665     1     5 alabama      &lt;NA&gt;
6 -87.58806 30.32665     1     6 alabama      &lt;NA&gt;</code></pre>
</div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">states</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           long      lat group order  region subregion
15594 -106.3295 41.00659    63 15594 wyoming      &lt;NA&gt;
15595 -106.8566 41.01232    63 15595 wyoming      &lt;NA&gt;
15596 -107.3093 41.01805    63 15596 wyoming      &lt;NA&gt;
15597 -107.9223 41.01805    63 15597 wyoming      &lt;NA&gt;
15598 -109.0568 40.98940    63 15598 wyoming      &lt;NA&gt;
15599 -109.0511 40.99513    63 15599 wyoming      &lt;NA&gt;</code></pre>
</div>
</div>
<p>Plot the map data using <code>geom_polygon</code> and ggplot, plotting the latitude and longitude (Global Positioning System or GPS coordinates):</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">states</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html">geom_polygon</a></span><span class="op">(</span>     <span class="co"># draw a polygon</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>,   <span class="co"># use GPS coordinates</span></span>
<span>        y <span class="op">=</span> <span class="va">lat</span>, </span>
<span>        fill <span class="op">=</span> <span class="va">region</span>,  <span class="co"># color by states </span></span>
<span>        group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, <span class="co"># group polygons by state</span></span>
<span>    color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>  <span class="co"># borders are white</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed</a></span><span class="op">(</span><span class="fl">1.3</span><span class="op">)</span> <span class="op">+</span>    <span class="co"># aspect ratio</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill<span class="op">=</span><span class="st">"none"</span><span class="op">)</span>  <span class="co"># do this to leave off the color legend</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Since <code>states</code> it is just a dataframe, it is easy to subset. We can do it many ways, but here is an example using the subset function. This also demonstrates the point nature of the data and why specifying the group is important:</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">west_coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">states</span>, <span class="va">region</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"california"</span>, <span class="st">"oregon"</span>, <span class="st">"washington"</span>, <span class="st">"hawaii"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">west_coast</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html">geom_polygon</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>,</span>
<span>        y <span class="op">=</span> <span class="va">lat</span><span class="op">)</span>, </span>
<span>    fill <span class="op">=</span> <span class="st">"palegreen"</span>, </span>
<span>    color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Thatʻs better! In this dataset, <code>group</code> indicates the states by number. Now the points belong the states, and arenʻt plotted out of order.</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">west_coast</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html">geom_polygon</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>, </span>
<span>        y <span class="op">=</span> <span class="va">lat</span>, </span>
<span>        group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, <span class="co"># group by state</span></span>
<span>    fill <span class="op">=</span> <span class="st">"palegreen"</span>, </span>
<span>    color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed</a></span><span class="op">(</span><span class="fl">1.3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="an-example-zooming-in-on-california" class="level3"><h3 class="anchored" data-anchor-id="an-example-zooming-in-on-california">An example zooming in on California</h3>
<p>Get the geospatial data by subsetting. Get the county data too</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ca_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">states</span>, <span class="va">region</span> <span class="op">==</span> <span class="st">"california"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ca_df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         long      lat group order     region subregion
667 -120.0060 42.00927     4   667 california      &lt;NA&gt;
668 -120.0060 41.20139     4   668 california      &lt;NA&gt;
669 -120.0060 39.70024     4   669 california      &lt;NA&gt;
670 -119.9946 39.44241     4   670 california      &lt;NA&gt;
671 -120.0060 39.31636     4   671 california      &lt;NA&gt;
672 -120.0060 39.16166     4   672 california      &lt;NA&gt;</code></pre>
</div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">counties</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/map_data.html">map_data</a></span><span class="op">(</span><span class="st">"county"</span><span class="op">)</span></span>
<span><span class="va">ca_county</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">counties</span>, <span class="va">region</span> <span class="op">==</span> <span class="st">"california"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ca_county</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          long      lat group order     region subregion
6965 -121.4785 37.48290   157  6965 california   alameda
6966 -121.5129 37.48290   157  6966 california   alameda
6967 -121.8853 37.48290   157  6967 california   alameda
6968 -121.8968 37.46571   157  6968 california   alameda
6969 -121.9254 37.45998   157  6969 california   alameda
6970 -121.9483 37.47717   157  6970 california   alameda</code></pre>
</div>
</div>
<p>Letʻs have a look at the county data. County info is in the <code>subregion</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ca_base</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>              data <span class="op">=</span> <span class="va">ca_df</span>, </span>
<span>              mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>                              x <span class="op">=</span> <span class="va">long</span>, </span>
<span>                              y <span class="op">=</span> <span class="va">lat</span>, </span>
<span>                              group <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed</a></span><span class="op">(</span><span class="fl">1.3</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html">geom_polygon</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"gray"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ca_base</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/theme_nothing.html">theme_nothing</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ca_base</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/theme_nothing.html">theme_nothing</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html">geom_polygon</a></span><span class="op">(</span></span>
<span>      data <span class="op">=</span> <span class="va">ca_county</span>, <span class="co"># county outlines</span></span>
<span>      fill <span class="op">=</span> <span class="cn">NA</span>, </span>
<span>      color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html">geom_polygon</a></span><span class="op">(</span></span>
<span>      color <span class="op">=</span> <span class="st">"black"</span>, </span>
<span>      fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>  <span class="co"># plot last so border on top layer</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Try choosing a county and filling it with a different color.</p>
</section></section><section id="sf-package" class="level2"><h2 class="anchored" data-anchor-id="sf-package">
<code>sf</code> package</h2>
<p>The newer packages work with <strong>shapefiles</strong>, which are data types produced by ArgGIS and other spatial software. There is a lot of shapefile data available on the internet. For example, for Hawaii, see <a href="https://geoportal.hawaii.gov" class="uri">https://geoportal.hawaii.gov</a>.</p>
<p>Load packages:</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.13.0, GDAL 3.8.5, PROJ 9.5.1; sf_use_s2() is TRUE</code></pre>
</div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rnaturalearth/">rnaturalearth</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'magrittr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:ggmap':

    inset</code></pre>
</div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://paleolimbot.github.io/ggspatial/">ggspatial</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>rnaturalerth</code> has a lot of map data already available, all you need to do is subset it to the region you wish to use.</p>
<p><code>sf</code> is a package that reads, writes, and helps you work with shapefiles.</p>
<p><code>ggspacial</code> has some nice add on functions</p>
<p><code>grid</code> adds a rectangular grid to an existing plot</p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">world</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/rnaturalearth/reference/ne_countries.html">ne_countries</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="st">"medium"</span>, returnclass <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">world</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "sf"         "data.frame"</code></pre>
</div>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">world</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "sf"         "data.frame"</code></pre>
</div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">world</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 242 features and 168 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.99893 xmax: 180 ymax: 83.59961
Geodetic CRS:  WGS 84
First 10 features:
        featurecla scalerank labelrank                     sovereignt sov_a3
1  Admin-0 country         1         3                       Zimbabwe    ZWE
2  Admin-0 country         1         3                         Zambia    ZMB
3  Admin-0 country         1         3                          Yemen    YEM
4  Admin-0 country         3         2                        Vietnam    VNM
5  Admin-0 country         5         3                      Venezuela    VEN
6  Admin-0 country         6         6                        Vatican    VAT
7  Admin-0 country         1         4                        Vanuatu    VUT
8  Admin-0 country         1         3                     Uzbekistan    UZB
9  Admin-0 country         1         4                        Uruguay    URY
10 Admin-0 country         3         6 Federated States of Micronesia    FSM
   adm0_dif level              type tlc                          admin adm0_a3
1         0     2 Sovereign country   1                       Zimbabwe     ZWE
2         0     2 Sovereign country   1                         Zambia     ZMB
3         0     2 Sovereign country   1                          Yemen     YEM
4         0     2 Sovereign country   1                        Vietnam     VNM
5         0     2 Sovereign country   1                      Venezuela     VEN
6         0     2 Sovereign country   1                        Vatican     VAT
7         0     2 Sovereign country   1                        Vanuatu     VUT
8         0     2 Sovereign country   1                     Uzbekistan     UZB
9         0     2 Sovereign country   1                        Uruguay     URY
10        0     2 Sovereign country   1 Federated States of Micronesia     FSM
   geou_dif                        geounit gu_a3 su_dif
1         0                       Zimbabwe   ZWE      0
2         0                         Zambia   ZMB      0
3         0                          Yemen   YEM      0
4         0                        Vietnam   VNM      0
5         0                      Venezuela   VEN      0
6         0                        Vatican   VAT      0
7         0                        Vanuatu   VUT      0
8         0                     Uzbekistan   UZB      0
9         0                        Uruguay   URY      0
10        0 Federated States of Micronesia   FSM      0
                          subunit su_a3 brk_diff       name
1                        Zimbabwe   ZWE        0   Zimbabwe
2                          Zambia   ZMB        0     Zambia
3                           Yemen   YEM        0      Yemen
4                         Vietnam   VNM        0    Vietnam
5                       Venezuela   VEN        0  Venezuela
6                         Vatican   VAT        0    Vatican
7                         Vanuatu   VUT        0    Vanuatu
8                      Uzbekistan   UZB        0 Uzbekistan
9                         Uruguay   URY        0    Uruguay
10 Federated States of Micronesia   FSM        0 Micronesia
                        name_long brk_a3   brk_name brk_group abbrev postal
1                        Zimbabwe    ZWE   Zimbabwe      &lt;NA&gt;  Zimb.     ZW
2                          Zambia    ZMB     Zambia      &lt;NA&gt; Zambia     ZM
3                           Yemen    YEM      Yemen      &lt;NA&gt;   Yem.     YE
4                         Vietnam    VNM    Vietnam      &lt;NA&gt;  Viet.     VN
5                       Venezuela    VEN  Venezuela      &lt;NA&gt;   Ven.     VE
6                         Vatican    VAT    Vatican      &lt;NA&gt;   Vat.      V
7                         Vanuatu    VUT    Vanuatu      &lt;NA&gt;   Van.     VU
8                      Uzbekistan    UZB Uzbekistan      &lt;NA&gt;   Uzb.     UZ
9                         Uruguay    URY    Uruguay      &lt;NA&gt;   Ury.     UY
10 Federated States of Micronesia    FSM Micronesia      &lt;NA&gt; F.S.M.    FSM
                          formal_en                          formal_fr
1              Republic of Zimbabwe                               &lt;NA&gt;
2                Republic of Zambia                               &lt;NA&gt;
3                 Republic of Yemen                               &lt;NA&gt;
4     Socialist Republic of Vietnam                               &lt;NA&gt;
5  Bolivarian Republic of Venezuela República Bolivariana de Venezuela
6         State of the Vatican City                               &lt;NA&gt;
7               Republic of Vanuatu                               &lt;NA&gt;
8            Republic of Uzbekistan                               &lt;NA&gt;
9      Oriental Republic of Uruguay                               &lt;NA&gt;
10   Federated States of Micronesia                               &lt;NA&gt;
                        name_ciawf note_adm0 note_brk
1                         Zimbabwe      &lt;NA&gt;     &lt;NA&gt;
2                           Zambia      &lt;NA&gt;     &lt;NA&gt;
3                            Yemen      &lt;NA&gt;     &lt;NA&gt;
4                          Vietnam      &lt;NA&gt;     &lt;NA&gt;
5                        Venezuela      &lt;NA&gt;     &lt;NA&gt;
6          Holy See (Vatican City)      &lt;NA&gt;     &lt;NA&gt;
7                          Vanuatu      &lt;NA&gt;     &lt;NA&gt;
8                       Uzbekistan      &lt;NA&gt;     &lt;NA&gt;
9                          Uruguay      &lt;NA&gt;     &lt;NA&gt;
10 Micronesia, Federated States of      &lt;NA&gt;     &lt;NA&gt;
                         name_sort name_alt mapcolor7 mapcolor8 mapcolor9
1                         Zimbabwe     &lt;NA&gt;         1         5         3
2                           Zambia     &lt;NA&gt;         5         8         5
3                      Yemen, Rep.     &lt;NA&gt;         5         3         3
4                          Vietnam     &lt;NA&gt;         5         6         5
5                    Venezuela, RB     &lt;NA&gt;         1         3         1
6               Vatican (Holy See) Holy See         1         3         4
7                          Vanuatu     &lt;NA&gt;         6         3         7
8                       Uzbekistan     &lt;NA&gt;         2         3         5
9                          Uruguay     &lt;NA&gt;         1         2         2
10 Micronesia, Federated States of     &lt;NA&gt;         5         2         4
   mapcolor13  pop_est pop_rank pop_year gdp_md gdp_year
1           9 14645468       14     2019  21440     2019
2          13 17861030       14     2019  23309     2019
3          11 29161922       15     2019  22581     2019
4           4 96462106       16     2019 261921     2019
5           4 28515829       15     2019 482359     2014
6           2      825        2     2019    -99     2019
7           3   299882       10     2019    934     2019
8           4 33580650       15     2019  57921     2019
9          10  3461734       12     2019  56045     2019
10         13   113815        9     2019    401     2018
                      economy              income_grp fips_10 iso_a2 iso_a2_eh
1     5. Emerging region: G20           5. Low income      ZI     ZW        ZW
2   7. Least developed region  4. Lower middle income      ZA     ZM        ZM
3   7. Least developed region  4. Lower middle income      YM     YE        YE
4     5. Emerging region: G20  4. Lower middle income      VM     VN        VN
5     5. Emerging region: G20  3. Upper middle income      VE     VE        VE
6  2. Developed region: nonG7 2. High income: nonOECD      VT     VA        VA
7   7. Least developed region  4. Lower middle income      NH     VU        VU
8        6. Developing region  4. Lower middle income      UZ     UZ        UZ
9     5. Emerging region: G20  3. Upper middle income      UY     UY        UY
10       6. Developing region  4. Lower middle income      FM     FM        FM
   iso_a3 iso_a3_eh iso_n3 iso_n3_eh un_a3 wb_a2 wb_a3   woe_id woe_id_eh
1     ZWE       ZWE    716       716   716    ZW   ZWE 23425004  23425004
2     ZMB       ZMB    894       894   894    ZM   ZMB 23425003  23425003
3     YEM       YEM    887       887   887    RY   YEM 23425002  23425002
4     VNM       VNM    704       704   704    VN   VNM 23424984  23424984
5     VEN       VEN    862       862   862    VE   VEN 23424982  23424982
6     VAT       VAT    336       336   336   -99   -99 23424986  23424986
7     VUT       VUT    548       548   548    VU   VUT 23424907  23424907
8     UZB       UZB    860       860   860    UZ   UZB 23424980  23424980
9     URY       URY    858       858   858    UY   URY 23424979  23424979
10    FSM       FSM    583       583   583    FM   FSM 23424815  23424815
                     woe_note adm0_iso adm0_diff adm0_tlc adm0_a3_us adm0_a3_fr
1  Exact WOE match as country      ZWE      &lt;NA&gt;      ZWE        ZWE        ZWE
2  Exact WOE match as country      ZMB      &lt;NA&gt;      ZMB        ZMB        ZMB
3  Exact WOE match as country      YEM      &lt;NA&gt;      YEM        YEM        YEM
4  Exact WOE match as country      VNM      &lt;NA&gt;      VNM        VNM        VNM
5  Exact WOE match as country      VEN      &lt;NA&gt;      VEN        VEN        VEN
6  Exact WOE match as country      VAT      &lt;NA&gt;      VAT        VAT        VAT
7  Exact WOE match as country      VUT      &lt;NA&gt;      VUT        VUT        VUT
8  Exact WOE match as country      UZB      &lt;NA&gt;      UZB        UZB        UZB
9  Exact WOE match as country      URY      &lt;NA&gt;      URY        URY        URY
10 Exact WOE match as country      FSM      &lt;NA&gt;      FSM        FSM        FSM
   adm0_a3_ru adm0_a3_es adm0_a3_cn adm0_a3_tw adm0_a3_in adm0_a3_np adm0_a3_pk
1         ZWE        ZWE        ZWE        ZWE        ZWE        ZWE        ZWE
2         ZMB        ZMB        ZMB        ZMB        ZMB        ZMB        ZMB
3         YEM        YEM        YEM        YEM        YEM        YEM        YEM
4         VNM        VNM        VNM        VNM        VNM        VNM        VNM
5         VEN        VEN        VEN        VEN        VEN        VEN        VEN
6         VAT        VAT        VAT        VAT        VAT        VAT        VAT
7         VUT        VUT        VUT        VUT        VUT        VUT        VUT
8         UZB        UZB        UZB        UZB        UZB        UZB        UZB
9         URY        URY        URY        URY        URY        URY        URY
10        FSM        FSM        FSM        FSM        FSM        FSM        FSM
   adm0_a3_de adm0_a3_gb adm0_a3_br adm0_a3_il adm0_a3_ps adm0_a3_sa adm0_a3_eg
1         ZWE        ZWE        ZWE        ZWE        ZWE        ZWE        ZWE
2         ZMB        ZMB        ZMB        ZMB        ZMB        ZMB        ZMB
3         YEM        YEM        YEM        YEM        YEM        YEM        YEM
4         VNM        VNM        VNM        VNM        VNM        VNM        VNM
5         VEN        VEN        VEN        VEN        VEN        VEN        VEN
6         VAT        VAT        VAT        VAT        VAT        VAT        VAT
7         VUT        VUT        VUT        VUT        VUT        VUT        VUT
8         UZB        UZB        UZB        UZB        UZB        UZB        UZB
9         URY        URY        URY        URY        URY        URY        URY
10        FSM        FSM        FSM        FSM        FSM        FSM        FSM
   adm0_a3_ma adm0_a3_pt adm0_a3_ar adm0_a3_jp adm0_a3_ko adm0_a3_vn adm0_a3_tr
1         ZWE        ZWE        ZWE        ZWE        ZWE        ZWE        ZWE
2         ZMB        ZMB        ZMB        ZMB        ZMB        ZMB        ZMB
3         YEM        YEM        YEM        YEM        YEM        YEM        YEM
4         VNM        VNM        VNM        VNM        VNM        VNM        VNM
5         VEN        VEN        VEN        VEN        VEN        VEN        VEN
6         VAT        VAT        VAT        VAT        VAT        VAT        VAT
7         VUT        VUT        VUT        VUT        VUT        VUT        VUT
8         UZB        UZB        UZB        UZB        UZB        UZB        UZB
9         URY        URY        URY        URY        URY        URY        URY
10        FSM        FSM        FSM        FSM        FSM        FSM        FSM
   adm0_a3_id adm0_a3_pl adm0_a3_gr adm0_a3_it adm0_a3_nl adm0_a3_se adm0_a3_bd
1         ZWE        ZWE        ZWE        ZWE        ZWE        ZWE        ZWE
2         ZMB        ZMB        ZMB        ZMB        ZMB        ZMB        ZMB
3         YEM        YEM        YEM        YEM        YEM        YEM        YEM
4         VNM        VNM        VNM        VNM        VNM        VNM        VNM
5         VEN        VEN        VEN        VEN        VEN        VEN        VEN
6         VAT        VAT        VAT        VAT        VAT        VAT        VAT
7         VUT        VUT        VUT        VUT        VUT        VUT        VUT
8         UZB        UZB        UZB        UZB        UZB        UZB        UZB
9         URY        URY        URY        URY        URY        URY        URY
10        FSM        FSM        FSM        FSM        FSM        FSM        FSM
   adm0_a3_ua adm0_a3_un adm0_a3_wb     continent region_un          subregion
1         ZWE        -99        -99        Africa    Africa     Eastern Africa
2         ZMB        -99        -99        Africa    Africa     Eastern Africa
3         YEM        -99        -99          Asia      Asia       Western Asia
4         VNM        -99        -99          Asia      Asia South-Eastern Asia
5         VEN        -99        -99 South America  Americas      South America
6         VAT        -99        -99        Europe    Europe    Southern Europe
7         VUT        -99        -99       Oceania   Oceania          Melanesia
8         UZB        -99        -99          Asia      Asia       Central Asia
9         URY        -99        -99 South America  Americas      South America
10        FSM        -99        -99       Oceania   Oceania         Micronesia
                    region_wb name_len long_len abbrev_len tiny homepart
1          Sub-Saharan Africa        8        8          5  -99        1
2          Sub-Saharan Africa        6        6          6  -99        1
3  Middle East &amp; North Africa        5        5          4  -99        1
4         East Asia &amp; Pacific        7        7          5    2        1
5   Latin America &amp; Caribbean        9        9          4  -99        1
6       Europe &amp; Central Asia        7        7          4    4        1
7         East Asia &amp; Pacific        7        7          4    2        1
8       Europe &amp; Central Asia       10       10          4    5        1
9   Latin America &amp; Caribbean        7        7          4  -99        1
10        East Asia &amp; Pacific       10       30          6  -99        1
   min_zoom min_label max_label   label_x    label_y      ne_id wikidataid
1         0       2.5       8.0  29.92544 -18.911640 1159321441       Q954
2         0       3.0       8.0  26.39530 -14.660804 1159321439       Q953
3         0       3.0       8.0  45.87438  15.328226 1159321425       Q805
4         0       2.0       7.0 105.38729  21.715416 1159321417       Q881
5         0       2.5       7.5 -64.59938   7.182476 1159321411       Q717
6         0       5.0      10.0  12.45342  41.903323 1159321407       Q237
7         0       4.0       9.0 166.90876 -15.371530 1159321421       Q686
8         0       3.0       8.0  64.00543  41.693603 1159321405       Q265
9         0       3.0       8.0 -55.96694 -32.961127 1159321353        Q77
10        0       5.0      10.0 158.23402   6.887553 1159320691       Q702
                     name_ar              name_bn
1                   زيمبابوي             জিম্বাবুয়ে
2                     زامبيا              জাম্বিয়া
3                      اليمن               ইয়েমেন
4                     فيتنام             ভিয়েতনাম
5                    فنزويلا            ভেনেজুয়েলা
6                  الفاتيكان        ভ্যাটিকান সিটি
7                    فانواتو               ভানুয়াতু
8                  أوزبكستان           উজবেকিস্তান
9                 الأوروغواي                উরুগুয়ে
10 ولايات ميكرونيسيا المتحدة মাইক্রোনেশিয়া যুক্তরাজ্য
                              name_de                        name_en
1                            Simbabwe                       Zimbabwe
2                              Sambia                         Zambia
3                               Jemen                          Yemen
4                             Vietnam                        Vietnam
5                           Venezuela                      Venezuela
6                        Vatikanstadt                   Vatican City
7                             Vanuatu                        Vanuatu
8                          Usbekistan                     Uzbekistan
9                             Uruguay                        Uruguay
10 Föderierte Staaten von Mikronesien Federated States of Micronesia
                           name_es  name_fa                     name_fr
1                         Zimbabue زیمبابوه                    Zimbabwe
2                           Zambia   زامبیا                      Zambie
3                            Yemen      یمن                       Yémen
4                          Vietnam   ویتنام                    Viêt Nam
5                        Venezuela  ونزوئلا                   Venezuela
6              Ciudad del Vaticano  واتیکان             Cité du Vatican
7                          Vanuatu  وانواتو                     Vanuatu
8                       Uzbekistán ازبکستان                 Ouzbékistan
9                          Uruguay  اروگوئه                     Uruguay
10 Estados Federados de Micronesia میکرونزی États fédérés de Micronésie
                                name_el       name_he                  name_hi
1                            Ζιμπάμπουε      זימבבואה                  ज़िम्बाब्वे
2                                Ζάμπια         זמביה                  ज़ाम्बिया
3                                Υεμένη          תימן                      यमन
4                               Βιετνάμ       וייטנאם                  वियतनाम
5                            Βενεζουέλα       ונצואלה                   वेनेज़ुएला
6                              Βατικανό קריית הוותיקן                वैटिकन नगर
7                             Βανουάτου        ונואטו                    वानूआटू
8                          Ουζμπεκιστάν     אוזבקיסטן                उज़्बेकिस्तान
9                            Ουρουγουάη     אורוגוואי                     उरुग्वे
10 Ομόσπονδες Πολιτείες της Μικρονησίας     מיקרונזיה माइक्रोनेशिया के संघीकृत राज्य
                          name_hu    name_id                      name_it
1                        Zimbabwe   Zimbabwe                     Zimbabwe
2                          Zambia     Zambia                       Zambia
3                           Jemen      Yaman                        Yemen
4                         Vietnám    Vietnam                      Vietnam
5                       Venezuela  Venezuela                    Venezuela
6                         Vatikán    Vatikan           Città del Vaticano
7                         Vanuatu    Vanuatu                      Vanuatu
8                     Üzbegisztán Uzbekistan                   Uzbekistan
9                         Uruguay    Uruguay                      Uruguay
10 Mikronéziai Szövetségi Államok Mikronesia Stati Federati di Micronesia
            name_ja           name_ko      name_nl    name_pl     name_pt
1        ジンバブエ          짐바브웨     Zimbabwe   Zimbabwe    Zimbábue
2          ザンビア            잠비아       Zambia     Zambia      Zâmbia
3          イエメン              예멘        Jemen      Jemen       Iémen
4          ベトナム            베트남      Vietnam    Wietnam    Vietname
5        ベネズエラ        베네수엘라    Venezuela  Wenezuela   Venezuela
6          バチカン       바티칸 시국 Vaticaanstad    Watykan    Vaticano
7          バヌアツ          바누아투      Vanuatu    Vanuatu     Vanuatu
8    ウズベキスタン      우즈베키스탄  Oezbekistan Uzbekistan Uzbequistão
9        ウルグアイ          우루과이      Uruguay    Urugwaj     Uruguai
10 ミクロネシア連邦 미크로네시아 연방   Micronesia Mikronezja  Micronésia
      name_ru                   name_sv    name_tr    name_uk      name_ur
1    Зимбабве                  Zimbabwe   Zimbabve   Зімбабве      زمبابوے
2      Замбия                    Zambia    Zambiya     Замбія       زیمبیا
3       Йемен                     Jemen      Yemen       Ємен          یمن
4     Вьетнам                   Vietnam    Vietnam    В'єтнам       ویتنام
5   Венесуэла                 Venezuela  Venezuela  Венесуела    وینیزویلا
6     Ватикан             Vatikanstaten    Vatikan    Ватикан   ویٹیکن سٹی
7     Вануату                   Vanuatu    Vanuatu    Вануату      وانواتو
8  Узбекистан                Uzbekistan Özbekistan Узбекистан     ازبکستان
9     Уругвай                   Uruguay    Uruguay    Уругвай     یوراگوئے
10 Микронезия Mikronesiska federationen Mikronezya Мікронезія مائیکرونیشیا
         name_vi          name_zh         name_zht      fclass_iso tlc_diff
1       Zimbabwe         津巴布韦           辛巴威 Admin-0 country     &lt;NA&gt;
2         Zambia           赞比亚           尚比亞 Admin-0 country     &lt;NA&gt;
3          Yemen             也门             葉門 Admin-0 country     &lt;NA&gt;
4       Việt Nam             越南             越南 Admin-0 country     &lt;NA&gt;
5      Venezuela         委内瑞拉         委內瑞拉 Admin-0 country     &lt;NA&gt;
6  Thành Vatican           梵蒂冈           梵蒂岡 Admin-0 country     &lt;NA&gt;
7        Vanuatu         瓦努阿图           萬那杜 Admin-0 country     &lt;NA&gt;
8     Uzbekistan     乌兹别克斯坦         烏茲別克 Admin-0 country     &lt;NA&gt;
9        Uruguay           乌拉圭           烏拉圭 Admin-0 country     &lt;NA&gt;
10    Micronesia 密克罗尼西亚联邦 密克羅尼西亞聯邦 Admin-0 country     &lt;NA&gt;
        fclass_tlc fclass_us fclass_fr fclass_ru fclass_es fclass_cn fclass_tw
1  Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
2  Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
3  Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
4  Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
5  Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
6  Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
7  Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
8  Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
9  Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
10 Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
   fclass_in fclass_np fclass_pk fclass_de fclass_gb fclass_br fclass_il
1       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
2       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
3       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
4       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
5       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
6       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
7       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
8       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
9       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
10      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
   fclass_ps fclass_sa fclass_eg fclass_ma fclass_pt fclass_ar fclass_jp
1       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
2       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
3       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
4       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
5       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
6       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
7       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
8       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
9       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
10      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
   fclass_ko fclass_vn fclass_tr fclass_id fclass_pl fclass_gr fclass_it
1       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
2       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
3       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
4       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
5       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
6       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
7       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
8       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
9       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
10      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
   fclass_nl fclass_se fclass_bd fclass_ua                       geometry
1       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((31.28789 -2...
2       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((30.39609 -1...
3       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((53.08564 16...
4       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((104.064 10....
5       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((-60.82119 9...
6       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((12.43916 41...
7       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((166.7458 -1...
8       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((70.94678 42...
9       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((-53.37061 -...
10      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((162.9832 5....</code></pre>
</div>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">world</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "featurecla" "scalerank"  "labelrank"  "sovereignt" "sov_a3"    
  [6] "adm0_dif"   "level"      "type"       "tlc"        "admin"     
 [11] "adm0_a3"    "geou_dif"   "geounit"    "gu_a3"      "su_dif"    
 [16] "subunit"    "su_a3"      "brk_diff"   "name"       "name_long" 
 [21] "brk_a3"     "brk_name"   "brk_group"  "abbrev"     "postal"    
 [26] "formal_en"  "formal_fr"  "name_ciawf" "note_adm0"  "note_brk"  
 [31] "name_sort"  "name_alt"   "mapcolor7"  "mapcolor8"  "mapcolor9" 
 [36] "mapcolor13" "pop_est"    "pop_rank"   "pop_year"   "gdp_md"    
 [41] "gdp_year"   "economy"    "income_grp" "fips_10"    "iso_a2"    
 [46] "iso_a2_eh"  "iso_a3"     "iso_a3_eh"  "iso_n3"     "iso_n3_eh" 
 [51] "un_a3"      "wb_a2"      "wb_a3"      "woe_id"     "woe_id_eh" 
 [56] "woe_note"   "adm0_iso"   "adm0_diff"  "adm0_tlc"   "adm0_a3_us"
 [61] "adm0_a3_fr" "adm0_a3_ru" "adm0_a3_es" "adm0_a3_cn" "adm0_a3_tw"
 [66] "adm0_a3_in" "adm0_a3_np" "adm0_a3_pk" "adm0_a3_de" "adm0_a3_gb"
 [71] "adm0_a3_br" "adm0_a3_il" "adm0_a3_ps" "adm0_a3_sa" "adm0_a3_eg"
 [76] "adm0_a3_ma" "adm0_a3_pt" "adm0_a3_ar" "adm0_a3_jp" "adm0_a3_ko"
 [81] "adm0_a3_vn" "adm0_a3_tr" "adm0_a3_id" "adm0_a3_pl" "adm0_a3_gr"
 [86] "adm0_a3_it" "adm0_a3_nl" "adm0_a3_se" "adm0_a3_bd" "adm0_a3_ua"
 [91] "adm0_a3_un" "adm0_a3_wb" "continent"  "region_un"  "subregion" 
 [96] "region_wb"  "name_len"   "long_len"   "abbrev_len" "tiny"      
[101] "homepart"   "min_zoom"   "min_label"  "max_label"  "label_x"   
[106] "label_y"    "ne_id"      "wikidataid" "name_ar"    "name_bn"   
[111] "name_de"    "name_en"    "name_es"    "name_fa"    "name_fr"   
[116] "name_el"    "name_he"    "name_hi"    "name_hu"    "name_id"   
[121] "name_it"    "name_ja"    "name_ko"    "name_nl"    "name_pl"   
[126] "name_pt"    "name_ru"    "name_sv"    "name_tr"    "name_uk"   
[131] "name_ur"    "name_vi"    "name_zh"    "name_zht"   "fclass_iso"
[136] "tlc_diff"   "fclass_tlc" "fclass_us"  "fclass_fr"  "fclass_ru" 
[141] "fclass_es"  "fclass_cn"  "fclass_tw"  "fclass_in"  "fclass_np" 
[146] "fclass_pk"  "fclass_de"  "fclass_gb"  "fclass_br"  "fclass_il" 
[151] "fclass_ps"  "fclass_sa"  "fclass_eg"  "fclass_ma"  "fclass_pt" 
[156] "fclass_ar"  "fclass_jp"  "fclass_ko"  "fclass_vn"  "fclass_tr" 
[161] "fclass_id"  "fclass_pl"  "fclass_gr"  "fclass_it"  "fclass_nl" 
[166] "fclass_se"  "fclass_bd"  "fclass_ua"  "geometry"  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">world_map</span> <span class="op">&lt;-</span> <span class="va">world</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">world_map</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Longitude"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Latitude"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"World map"</span>, subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"("</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">world</span><span class="op">$</span><span class="va">name</span><span class="op">)</span><span class="op">)</span>, <span class="st">" countries)"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">world_map</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Longitude"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Latitude"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"World map"</span>, subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"("</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">world</span><span class="op">$</span><span class="va">name</span><span class="op">)</span><span class="op">)</span>, <span class="st">" countries)"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">pop_est</span><span class="op">)</span>, show.legend<span class="op">=</span><span class="st">"point"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_c</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"plasma"</span>, trans <span class="op">=</span> <span class="st">"sqrt"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-9-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">world</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"lightgreen"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-9-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">usa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/rnaturalearth/reference/ne_states.html">ne_states</a></span><span class="op">(</span>country<span class="op">=</span><span class="st">"United States of America"</span>, returnclass <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">usa</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 6 features and 121 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -124.7346 ymin: 41.69681 xmax: -82.4146 ymax: 49.36949
Geodetic CRS:  WGS 84
                         featurecla scalerank adm1_code diss_me iso_3166_2
1236 Admin-1 states provinces lakes         2  USA-3519    3519      US-WA
1238 Admin-1 states provinces lakes         2  USA-3518    3518      US-ID
1239 Admin-1 states provinces lakes         2  USA-3515    3515      US-MT
1242 Admin-1 states provinces lakes         2  USA-3516    3516      US-ND
1244 Admin-1 states provinces lakes         2  USA-3514    3514      US-MN
1246 Admin-1 states provinces lakes         2  USA-3562    3562      US-MI
                                           wikipedia iso_a2 adm0_sr
1236 http://en.wikipedia.org/wiki/Washington_(state)     US       6
1238              http://en.wikipedia.org/wiki/Idaho     US       1
1239            http://en.wikipedia.org/wiki/Montana     US       1
1242       http://en.wikipedia.org/wiki/North_Dakota     US       1
1244          http://en.wikipedia.org/wiki/Minnesota     US       1
1246           http://en.wikipedia.org/wiki/Michigan     US       1
             name name_alt name_local  type type_en code_local code_hasc note
1236   Washington WA|Wash.       &lt;NA&gt; State   State       US53     US.WA &lt;NA&gt;
1238        Idaho ID|Idaho       &lt;NA&gt; State   State       US16     US.ID &lt;NA&gt;
1239      Montana MT|Mont.       &lt;NA&gt; State   State       US30     US.MT &lt;NA&gt;
1242 North Dakota  ND|N.D.       &lt;NA&gt; State   State       US38     US.ND &lt;NA&gt;
1244    Minnesota MN|Minn.       &lt;NA&gt; State   State       US27     US.MN &lt;NA&gt;
1246     Michigan MI|Mich.       &lt;NA&gt; State   State       US26     US.MI &lt;NA&gt;
     hasc_maybe  region region_cod provnum_ne gadm_level check_me datarank
1236       &lt;NA&gt;    West       &lt;NA&gt;          0          1       20        1
1238       &lt;NA&gt;    West       &lt;NA&gt;          0          1       20        1
1239       &lt;NA&gt;    West       &lt;NA&gt;          0          1       20        1
1242       &lt;NA&gt; Midwest       &lt;NA&gt;          0          1       20        1
1244       &lt;NA&gt; Midwest       &lt;NA&gt;          0          1       20        1
1246       &lt;NA&gt; Midwest       &lt;NA&gt;          0          1       20        1
     abbrev postal area_sqkm sameascity labelrank name_len mapcolor9 mapcolor13
1236  Wash.     WA         0        -99         0       10         1          1
1238  Idaho     ID         0        -99         0        5         1          1
1239  Mont.     MT         0        -99         0        7         1          1
1242   N.D.     ND         0        -99         0       12         1          1
1244  Minn.     MN         0        -99         0        9         1          1
1246  Mich.     MI         0        -99         0        8         1          1
     fips fips_alt  woe_id                       woe_label     woe_name
1236 US53     &lt;NA&gt; 2347606   Washington, US, United States   Washington
1238 US16     &lt;NA&gt; 2347571        Idaho, US, United States        Idaho
1239 US30     &lt;NA&gt; 2347585      Montana, US, United States      Montana
1242 US38     &lt;NA&gt; 2347593 North Dakota, US, United States North Dakota
1244 US27     &lt;NA&gt; 2347582    Minnesota, US, United States    Minnesota
1246 US26     &lt;NA&gt; 2347581     Michigan, US, United States     Michigan
     latitude longitude sov_a3 adm0_a3 adm0_label                    admin
1236  47.4865 -120.3610    US1     USA          2 United States of America
1238  43.7825 -114.1330    US1     USA          2 United States of America
1239  46.9965 -110.0440    US1     USA          2 United States of America
1242  47.4675 -100.3020    US1     USA          2 United States of America
1244  46.0592  -93.3640    US1     USA          2 United States of America
1246  43.4343  -84.9479    US1     USA          2 United States of America
                     geonunit gu_a3   gn_id      gn_name gns_id gns_name
1236 United States of America   USA 5815135   Washington     -1     &lt;NA&gt;
1238 United States of America   USA 5596512        Idaho     -1     &lt;NA&gt;
1239 United States of America   USA 5667009      Montana     -1     &lt;NA&gt;
1242 United States of America   USA 5690763 North Dakota     -1     &lt;NA&gt;
1244 United States of America   USA 5037779    Minnesota     -1     &lt;NA&gt;
1246 United States of America   USA 5001836     Michigan     -1     &lt;NA&gt;
     gn_level gn_region gn_a1_code         region_sub sub_code gns_level
1236        1      &lt;NA&gt;      US.WA            Pacific     &lt;NA&gt;        -1
1238        1      &lt;NA&gt;      US.ID           Mountain     &lt;NA&gt;        -1
1239        1      &lt;NA&gt;      US.MT           Mountain     &lt;NA&gt;        -1
1242        1      &lt;NA&gt;      US.ND West North Central     &lt;NA&gt;        -1
1244        1      &lt;NA&gt;      US.MN West North Central     &lt;NA&gt;        -1
1246        1      &lt;NA&gt;      US.MI East North Central     &lt;NA&gt;        -1
     gns_lang gns_adm1 gns_region min_label max_label min_zoom wikidataid
1236     &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       3.5       7.5        2      Q1223
1238     &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       3.5       7.5        2      Q1221
1239     &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       3.5       7.5        2      Q1212
1242     &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       3.5       7.5        2      Q1207
1244     &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       3.5       7.5        2      Q1527
1246     &lt;NA&gt;     &lt;NA&gt;       &lt;NA&gt;       3.5       7.5        2      Q1166
             name_ar    name_bn      name_de      name_en          name_es
1236          واشنطن   ওয়াশিংটন   Washington   Washington       Washington
1238          أيداهو     আইডাহো        Idaho        Idaho            Idaho
1239         مونتانا     মন্টানা      Montana      Montana          Montana
1242 داكوتا الشمالية নর্থ ডাকোটা North Dakota North Dakota Dakota del Norte
1244        مينيسوتا   মিনেসোটা    Minnesota    Minnesota        Minnesota
1246         ميشيغان    মিশিগান     Michigan     Michigan         Míchigan
            name_fr        name_el      name_hi      name_hu      name_id
1236     Washington    Ουάσινγκτον वॉशिंगटन राज्य   Washington   Washington
1238          Idaho        Άινταχο       आयडाहो        Idaho        Idaho
1239        Montana        Μοντάνα      मोन्टाना      Montana      Montana
1242 Dakota du Nord Βόρεια Ντακότα   उत्तर डेकोटा Észak-Dakota Dakota Utara
1244      Minnesota       Μινεσότα      मिनेसोटा    Minnesota    Minnesota
1246       Michigan       Μίσιγκαν       मिशिगन     Michigan     Michigan
             name_it        name_ja    name_ko      name_nl         name_pl
1236      Washington   ワシントン州     워싱턴   Washington      Waszyngton
1238           Idaho     アイダホ州   아이다호        Idaho           Idaho
1239         Montana     モンタナ州     몬태나      Montana         Montana
1242 Dakota del Nord ノースダコタ州 노스다코타 Noord-Dakota Dakota Północna
1244       Minnesota     ミネソタ州   미네소타    Minnesota       Minnesota
1246        Michigan     ミシガン州     미시간     Michigan        Michigan
             name_pt         name_ru      name_sv      name_tr    name_vi
1236      Washington       Вашингтон   Washington    Vaşington Washington
1238           Idaho          Айдахо        Idaho        Idaho      Idaho
1239         Montana         Монтана      Montana      Montana    Montana
1242 Dakota do Norte Северная Дакота North Dakota Kuzey Dakota Bắc Dakota
1244       Minnesota       Миннесота    Minnesota    Minnesota  Minnesota
1246        Michigan         Мичиган     Michigan     Michigan   Michigan
        name_zh      ne_id       name_he         name_uk       name_ur
1236   华盛顿州 1159309547     וושינגטון       Вашингтон ریاست واشنگٹن
1238   爱达荷州 1159315339        איידהו          Айдахо        ایڈاہو
1239   蒙大拿州 1159315333        מונטנה         Монтана       مونٹانا
1242 北达科他州 1159315337 דקוטה הצפונית Північна Дакота   شمالی ڈکوٹا
1244 明尼苏达州 1159315297       מינסוטה       Міннесота      مینیسوٹا
1246   密歇根州 1159314665        מישיגן         Мічиган        مشی گن
            name_fa   name_zht FCLASS_ISO FCLASS_US FCLASS_FR FCLASS_RU
1236 ایالت واشینگتن   華盛頓州       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1238         آیداهو   愛達荷州       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1239  ایالت مونتانا   蒙大拿州       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1242  داکوتای شمالی 北達科他州       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1244       مینهسوتا 明尼蘇達州       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1246        میشیگان   密歇根州       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
     FCLASS_ES FCLASS_CN FCLASS_TW FCLASS_IN FCLASS_NP FCLASS_PK FCLASS_DE
1236      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1238      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1239      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1242      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1244      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1246      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
     FCLASS_GB FCLASS_BR FCLASS_IL FCLASS_PS FCLASS_SA FCLASS_EG FCLASS_MA
1236      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1238      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1239      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1242      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1244      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1246      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
     FCLASS_PT FCLASS_AR FCLASS_JP FCLASS_KO FCLASS_VN FCLASS_TR FCLASS_ID
1236      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1238      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1239      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1242      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1244      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1246      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
     FCLASS_PL FCLASS_GR FCLASS_IT FCLASS_NL FCLASS_SE FCLASS_BD FCLASS_UA
1236      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1238      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1239      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1242      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1244      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
1246      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
     FCLASS_TLC                       geometry
1236       &lt;NA&gt; MULTIPOLYGON (((-122.753 48...
1238       &lt;NA&gt; MULTIPOLYGON (((-117.0382 4...
1239       &lt;NA&gt; MULTIPOLYGON (((-116.0482 4...
1242       &lt;NA&gt; MULTIPOLYGON (((-104.0476 4...
1244       &lt;NA&gt; MULTIPOLYGON (((-97.22609 4...
1246       &lt;NA&gt; MULTIPOLYGON (((-84.4913 46...</code></pre>
</div>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">hi</span> <span class="op">&lt;-</span> <span class="va">usa</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="st">"Hawaii"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">hi</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">usa</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plants_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html">read_sf</a></span><span class="op">(</span><span class="st">"Threatened-Endangered_Plants/Threatened-Endangered_Plants.shp"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">plants_sf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 295 features and 4 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 418663.1 ymin: 2094235 xmax: 940279.3 ymax: 2458614
Projected CRS: NAD83(HARN) / UTM zone 4N
# A tibble: 295 × 5
   objectid density st_areasha st_perimet                               geometry
      &lt;int&gt; &lt;chr&gt;        &lt;dbl&gt;      &lt;dbl&gt;                          &lt;POLYGON [m]&gt;
 1        1 O       486756841.    529043. ((458315.8 2458250, 458323.8 2458261,…
 2        2 O         1902211.     10318. ((442761.6 2457820, 442825.4 2457776,…
 3        3 VH       91796978.     55012. ((439743.9 2457337, 439749.5 2457315,…
 4        4 M       327957790.    178672. ((442266 2457081, 442399.4 2457054, 4…
 5        5 O         3303196.     21531. ((445019.8 2456927, 445048.5 2456954,…
 6        6 L         5716987.     19788. ((454844.9 2452549, 454657 2452625, 4…
 7        7 O           93867.      1576. ((435817.1 2454756, 435799.7 2454719,…
 8        8 L         1422708.      6576. ((457829.4 2452003, 457570.8 2451935,…
 9        9 O         1274152.      5524. ((433566.3 2452939, 433550 2452773, 4…
10       10 M        21326155.     56140. ((425412.9 2449482, 425419.3 2449480,…
# ℹ 285 more rows</code></pre>
</div>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">plants_sf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Geometry set for 295 features 
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 418663.1 ymin: 2094235 xmax: 940279.3 ymax: 2458614
Projected CRS: NAD83(HARN) / UTM zone 4N
First 5 geometries:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>POLYGON ((458315.8 2458250, 458323.8 2458261, 4...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>POLYGON ((442761.6 2457820, 442825.4 2457776, 4...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>POLYGON ((439743.9 2457337, 439749.5 2457315, 4...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>POLYGON ((442266 2457081, 442399.4 2457054, 442...</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>POLYGON ((445019.8 2456927, 445048.5 2456954, 4...</code></pre>
</div>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">old_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html">read_sf</a></span><span class="op">(</span><span class="st">"USGS_Quads_(Old_Hawaiian_Datum)/USGS_Quads_(Old_Hawaiian_Datum).shp"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">old_sf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 128 features and 5 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 367593.4 ymin: 2089668 xmax: 946763.1 ymax: 2459366
Projected CRS: NAD83(HARN) / UTM zone 4N
# A tibble: 128 × 6
   objectid qname         qnum  st_areasha st_perimet                   geometry
      &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt;              &lt;POLYGON [m]&gt;
 1        1 HAENA         K03   178152007.     53420. ((431559.5 2452918, 43159…
 2        2 HANALEI       K06   178109861.     53416. ((444471.9 2459311, 45735…
 3        3 ANAHOLA       K09   178076759.     53411. ((457315.4 2445444, 45735…
 4        4 MAKAHA POINT  K01   178290448.     53441. ((418674 2452974, 431559.…
 5        5 WAIMEA CANYON K04   178470118.     53467. ((431529.2 2445543, 44442…
 6        6 WAIALEALE     K07   178392925.     53458. ((444422.5 2445489, 45731…
 7        7 KAPAA         K10   178336247.     53449. ((457315.4 2445444, 47020…
 8        8 KEKAHA        K02   178551324.     53480. ((418602.1 2439147, 43149…
 9        9 NIIHAU NORTH  N01   380920692.     81144. ((367716.3 2421892, 36783…
10       10 HANAPEPE      K05   178659961.     53495. ((431468.3 2431707, 44437…
# ℹ 118 more rows</code></pre>
</div>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">old_sf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-10-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="ng-map" class="level2"><h2 class="anchored" data-anchor-id="ng-map">NG map</h2>
<div class="cell">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ng_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/rnaturalearth/reference/ne_countries.html">ne_countries</a></span><span class="op">(</span>country <span class="op">=</span> </span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>              <span class="st">"Papua New Guinea"</span>, </span>
<span>              <span class="st">"Indonesia"</span>, </span>
<span>              <span class="st">"Philippines"</span></span>
<span>            <span class="op">)</span>, </span>
<span>            scale<span class="op">=</span><span class="fl">50</span>, </span>
<span>            returnclass<span class="op">=</span><span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ng_sf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 3 features and 168 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 95.20664 ymin: -11.63057 xmax: 155.9576 ymax: 20.84126
Geodetic CRS:  WGS 84
         featurecla scalerank labelrank       sovereignt sov_a3 adm0_dif level
81  Admin-0 country         1         2      Philippines    PHL        0     2
84  Admin-0 country         1         2 Papua New Guinea    PNG        0     2
144 Admin-0 country         3         2        Indonesia    IDN        0     2
                 type tlc            admin adm0_a3 geou_dif          geounit
81  Sovereign country   1      Philippines     PHL        0      Philippines
84  Sovereign country   1 Papua New Guinea     PNG        0 Papua New Guinea
144 Sovereign country   1        Indonesia     IDN        0        Indonesia
    gu_a3 su_dif          subunit su_a3 brk_diff             name
81    PHL      0      Philippines   PHL        0      Philippines
84    PNG      1 Papua New Guinea   PN1        0 Papua New Guinea
144   IDN      0        Indonesia   IDN        0        Indonesia
           name_long brk_a3         brk_name brk_group abbrev postal
81       Philippines    PHL      Philippines      &lt;NA&gt;  Phil.     PH
84  Papua New Guinea    PN1 Papua New Guinea      &lt;NA&gt; P.N.G.     PG
144        Indonesia    IDN        Indonesia      &lt;NA&gt;  Indo.   INDO
                                formal_en formal_fr       name_ciawf note_adm0
81            Republic of the Philippines      &lt;NA&gt;      Philippines      &lt;NA&gt;
84  Independent State of Papua New Guinea      &lt;NA&gt; Papua New Guinea      &lt;NA&gt;
144                 Republic of Indonesia      &lt;NA&gt;        Indonesia      &lt;NA&gt;
    note_brk        name_sort name_alt mapcolor7 mapcolor8 mapcolor9 mapcolor13
81      &lt;NA&gt;      Philippines     &lt;NA&gt;         3         2         2          8
84      &lt;NA&gt; Papua New Guinea     &lt;NA&gt;         4         2         3          1
144     &lt;NA&gt;        Indonesia     &lt;NA&gt;         6         6         6         11
      pop_est pop_rank pop_year  gdp_md gdp_year                  economy
81  108116615       17     2019  376795     2019  5. Emerging region: G20
84    8776109       13     2019   24829     2019     6. Developing region
144 270625568       17     2019 1119190     2019 4. Emerging region: MIKT
                income_grp fips_10 iso_a2 iso_a2_eh iso_a3 iso_a3_eh iso_n3
81  4. Lower middle income      RP     PH        PH    PHL       PHL    608
84  4. Lower middle income      PP     PG        PG    PNG       PNG    598
144 4. Lower middle income      ID     ID        ID    IDN       IDN    360
    iso_n3_eh un_a3 wb_a2 wb_a3   woe_id woe_id_eh                   woe_note
81        608   608    PH   PHL 23424934  23424934 Exact WOE match as country
84        598   598    PG   PNG 23424926  23424926 Exact WOE match as country
144       360   360    ID   IDN 23424846  23424846 Exact WOE match as country
    adm0_iso adm0_diff adm0_tlc adm0_a3_us adm0_a3_fr adm0_a3_ru adm0_a3_es
81       PHL      &lt;NA&gt;      PHL        PHL        PHL        PHL        PHL
84       PN1      &lt;NA&gt;      PN1        PNG        PNG        PNG        PNG
144      IDN      &lt;NA&gt;      IDN        IDN        IDN        IDN        IDN
    adm0_a3_cn adm0_a3_tw adm0_a3_in adm0_a3_np adm0_a3_pk adm0_a3_de
81         PHL        PHL        PHL        PHL        PHL        PHL
84         PNG        PNG        PNG        PNG        PNG        PNG
144        IDN        IDN        IDN        IDN        IDN        IDN
    adm0_a3_gb adm0_a3_br adm0_a3_il adm0_a3_ps adm0_a3_sa adm0_a3_eg
81         PHL        PHL        PHL        PHL        PHL        PHL
84         PNG        PNG        PNG        PNG        PNG        PNG
144        IDN        IDN        IDN        IDN        IDN        IDN
    adm0_a3_ma adm0_a3_pt adm0_a3_ar adm0_a3_jp adm0_a3_ko adm0_a3_vn
81         PHL        PHL        PHL        PHL        PHL        PHL
84         PNG        PNG        PNG        PNG        PNG        PNG
144        IDN        IDN        IDN        IDN        IDN        IDN
    adm0_a3_tr adm0_a3_id adm0_a3_pl adm0_a3_gr adm0_a3_it adm0_a3_nl
81         PHL        PHL        PHL        PHL        PHL        PHL
84         PNG        PNG        PNG        PNG        PNG        PNG
144        IDN        IDN        IDN        IDN        IDN        IDN
    adm0_a3_se adm0_a3_bd adm0_a3_ua adm0_a3_un adm0_a3_wb continent region_un
81         PHL        PHL        PHL        -99        -99      Asia      Asia
84         PNG        PNG        PNG        -99        -99   Oceania   Oceania
144        IDN        IDN        IDN        -99        -99      Asia      Asia
             subregion           region_wb name_len long_len abbrev_len tiny
81  South-Eastern Asia East Asia &amp; Pacific       11       11          5  -99
84           Melanesia East Asia &amp; Pacific       16       16          6  -99
144 South-Eastern Asia East Asia &amp; Pacific        9        9          5  -99
    homepart min_zoom min_label max_label  label_x   label_y      ne_id
81         1        0       2.5       7.0 122.4650 11.198000 1159321169
84         1        0       2.5       7.5 143.9102 -5.695285 1159321173
144        1        0       1.7       6.7 101.8929 -0.954404 1159320845
    wikidataid             name_ar       name_bn         name_de
81        Q928             الفلبين      ফিলিপাইন     Philippinen
84        Q691 بابوا غينيا الجديدة পাপুয়া নিউগিনি Papua-Neuguinea
144       Q252           إندونيسيا    ইন্দোনেশিয়া      Indonesien
             name_en            name_es       name_fa                   name_fr
81       Philippines          Filipinas       فیلیپین               Philippines
84  Papua New Guinea Papúa Nueva Guinea پاپوآ گینه نو Papouasie-Nouvelle-Guinée
144        Indonesia          Indonesia       اندونزی                 Indonésie
               name_el           name_he      name_hi         name_hu
81          Φιλιππίνες        הפיליפינים     फ़िलीपीन्स  Fülöp-szigetek
84  Παπούα Νέα Γουινέα פפואה גינאה החדשה पापुआ न्यू गिनी Pápua Új-Guinea
144          Ινδονησία         אינדונזיה     इंडोनेशिया       Indonézia
         name_id            name_it            name_ja      name_ko
81      Filipina          Filippine         フィリピン       필리핀
84  Papua Nugini Papua Nuova Guinea パプアニューギニア 파푸아뉴기니
144    Indonesia          Indonesia       インドネシア   인도네시아
                name_nl           name_pl          name_pt              name_ru
81           Filipijnen          Filipiny        Filipinas            Филиппины
84  Papoea-Nieuw-Guinea Papua-Nowa Gwinea Papua-Nova Guiné Папуа — Новая Гвинея
144           Indonesië         Indonezja        Indonésia            Индонезия
             name_sv         name_tr           name_uk       name_ur
81      Filippinerna      Filipinler         Філіппіни        فلپائن
84  Papua Nya Guinea Papua Yeni Gine Папуа Нова Гвінея پاپوا نیو گنی
144       Indonesien       Endonezya         Індонезія     انڈونیشیا
             name_vi        name_zh       name_zht      fclass_iso tlc_diff
81       Philippines         菲律宾         菲律賓 Admin-0 country     &lt;NA&gt;
84  Papua New Guinea 巴布亚新几内亚 巴布亞紐幾內亞 Admin-0 country     &lt;NA&gt;
144        Indonesia     印度尼西亚     印度尼西亞 Admin-0 country     &lt;NA&gt;
         fclass_tlc fclass_us fclass_fr fclass_ru fclass_es fclass_cn fclass_tw
81  Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
84  Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
144 Admin-0 country      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
    fclass_in fclass_np fclass_pk fclass_de fclass_gb fclass_br fclass_il
81       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
84       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
144      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
    fclass_ps fclass_sa fclass_eg fclass_ma fclass_pt fclass_ar fclass_jp
81       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
84       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
144      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
    fclass_ko fclass_vn fclass_tr fclass_id fclass_pl fclass_gr fclass_it
81       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
84       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
144      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
    fclass_nl fclass_se fclass_bd fclass_ua                       geometry
81       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((121.1016 18...
84       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((152.9658 -4...
144      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((97.48154 1....</code></pre>
</div>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">ng_sf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">ng_sf</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ngp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">ng_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey80"</span>, fill <span class="op">=</span> <span class="st">"#f2f2f2"</span>, linewidth <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">154</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">12</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span> axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>         panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span>, colour <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span>       <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="add-points-to-map---first-get-data" class="level2"><h2 class="anchored" data-anchor-id="add-points-to-map---first-get-data">Add points to map - first get data</h2>
<p>My metadata file contains many genera that I am not interested in so first I filter by genus of interest.</p>
<div class="cell">
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/mbutler808/rclass-2025/refs/heads/main/posts/2025-05-01-spatial/metadata.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">odat</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">genus</span><span class="op">==</span><span class="st">"Oreophryne"</span><span class="op">)</span></span>
<span><span class="va">adat</span> <span class="op">&lt;-</span> <span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">genus</span><span class="op">==</span><span class="st">"Auparoparo"</span><span class="op">|</span><span class="va">genus</span><span class="op">==</span><span class="st">"Aphantophryne"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I make two separate datasets just by choice and for convenience to plot them in different colors later. I could also do it by keeping it together and filtering, personal choice.</p>
<div class="cell">
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># convert to sf</span></span>
<span><span class="va">osf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">odat</span>, coords<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"longitude"</span>, <span class="st">"latitude"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">asf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">adat</span>, coords<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"longitude"</span>, <span class="st">"latitude"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Map with points in different shapes and colors.</p>
<div class="cell">
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ngpdat</span> <span class="op">&lt;-</span> <span class="va">ngp</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">adat</span>, </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">longitude</span>, y<span class="op">=</span><span class="va">latitude</span><span class="op">)</span>, </span>
<span>    colour<span class="op">=</span><span class="st">"red"</span>, </span>
<span>    pch<span class="op">=</span><span class="st">"+"</span>, </span>
<span>    size<span class="op">=</span><span class="fl">8</span>, </span>
<span>    alpha<span class="op">=</span><span class="fl">.75</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">odat</span>, </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">longitude</span>, y<span class="op">=</span><span class="va">latitude</span><span class="op">)</span>, </span>
<span>    colour<span class="op">=</span><span class="st">"grey50"</span>, </span>
<span>    fill<span class="op">=</span><span class="st">"blue"</span>, </span>
<span>    pch<span class="op">=</span><span class="fl">24</span>, </span>
<span>    size<span class="op">=</span><span class="fl">2</span>, </span>
<span>    alpha<span class="op">=</span><span class="fl">.75</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="want-to-make-a-zoomed-in-inset---identify-coordinates" class="level3"><h3 class="anchored" data-anchor-id="want-to-make-a-zoomed-in-inset---identify-coordinates">Want to make a zoomed-in inset - identify coordinates</h3>
<div class="cell">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ngpdat</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="op">-</span><span class="fl">8.75</span>, lty <span class="op">=</span> <span class="fl">2</span>, colour <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="op">-</span><span class="fl">12</span>, lty <span class="op">=</span> <span class="fl">2</span>, colour <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">147</span>, lty <span class="op">=</span> <span class="fl">2</span>, colour <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">155</span>, lty <span class="op">=</span> <span class="fl">2</span>, colour <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="annotate-plot-with-a-rectangle-using-the-coordinates" class="level3"><h3 class="anchored" data-anchor-id="annotate-plot-with-a-rectangle-using-the-coordinates">Annotate plot with a rectangle using the coordinates</h3>
<div class="cell">
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ngpdat</span> <span class="op">&lt;-</span> <span class="va">ngpdat</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span><span class="st">"rect"</span>, xmin <span class="op">=</span> <span class="fl">149</span>, xmax <span class="op">=</span> <span class="fl">154.5</span>, ymin <span class="op">=</span> <span class="op">-</span><span class="fl">12</span>, ymax <span class="op">=</span> <span class="op">-</span><span class="fl">8.75</span>, color <span class="op">=</span> <span class="st">"grey50"</span>, fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span>, colour <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="make-inset---basically-another-plot-zoomed-in" class="level3"><h3 class="anchored" data-anchor-id="make-inset---basically-another-plot-zoomed-in">Make inset - basically another plot zoomed in</h3>
<div class="cell">
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">inset</span> <span class="op">&lt;-</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">ng_sf</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey70"</span>, fill <span class="op">=</span> <span class="st">"#f2f2f2"</span>, linewidth <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">149</span>, <span class="fl">154.5</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">12</span>, <span class="op">-</span><span class="fl">8.75</span><span class="op">)</span>, expand<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> <span class="co">#expand=F prevents ggplot from expanding slightly beyond the limits</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">genus</span><span class="op">==</span><span class="st">"Auparoparo"</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">latitude</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">12</span> <span class="op">&amp;</span></span>
<span>    <span class="va">latitude</span> <span class="op">&lt;</span> <span class="op">-</span><span class="fl">8.75</span> <span class="op">&amp;</span></span>
<span>    <span class="va">longitude</span> <span class="op">&gt;</span> <span class="fl">149</span> <span class="op">&amp;</span> </span>
<span>    <span class="va">longitude</span> <span class="op">&lt;</span> <span class="fl">154.5</span><span class="op">)</span> </span>
<span>    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span> </span>
<span>      mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">longitude</span>, y<span class="op">=</span><span class="va">latitude</span><span class="op">)</span>, </span>
<span>      color<span class="op">=</span><span class="st">"red"</span>, </span>
<span>      pch<span class="op">=</span><span class="st">"+"</span>, </span>
<span>      size<span class="op">=</span><span class="fl">8</span>, </span>
<span>      alpha<span class="op">=</span><span class="fl">.75</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">genus</span><span class="op">==</span><span class="st">"Oreophryne"</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">latitude</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">12</span> <span class="op">&amp;</span></span>
<span>    <span class="va">latitude</span> <span class="op">&lt;</span> <span class="op">-</span><span class="fl">8.75</span> <span class="op">&amp;</span></span>
<span>    <span class="va">longitude</span> <span class="op">&gt;</span> <span class="fl">149</span> <span class="op">&amp;</span> </span>
<span>    <span class="va">longitude</span> <span class="op">&lt;</span> <span class="fl">154.5</span><span class="op">)</span> </span>
<span>    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span></span>
<span>        mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">longitude</span>, y<span class="op">=</span><span class="va">latitude</span><span class="op">)</span>, </span>
<span>        colour<span class="op">=</span><span class="st">"grey50"</span>, </span>
<span>      fill<span class="op">=</span><span class="st">"blue"</span>, </span>
<span>      pch<span class="op">=</span><span class="fl">24</span>, </span>
<span>      size<span class="op">=</span><span class="fl">3</span>, </span>
<span>      alpha<span class="op">=</span><span class="fl">.75</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span><span class="st">"rect"</span>, xmin <span class="op">=</span> <span class="fl">149</span>, xmax <span class="op">=</span> <span class="fl">154.5</span>, ymin <span class="op">=</span> <span class="op">-</span><span class="fl">12</span>, ymax <span class="op">=</span> <span class="op">-</span><span class="fl">8.75</span>, color <span class="op">=</span> <span class="st">"grey50"</span>, fill<span class="op">=</span><span class="cn">NA</span>, linewidth<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">xlim</a></span><span class="op">(</span><span class="fl">149</span>, <span class="fl">154.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="op">-</span><span class="fl">12</span>, <span class="op">-</span><span class="fl">8.75</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span>, colour <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="plot-the-baseplot" class="level3"><h3 class="anchored" data-anchor-id="plot-the-baseplot">Plot the baseplot</h3>
<div class="cell">
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">baseplot</span> <span class="op">&lt;-</span> <span class="va">ngpdat</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label<span class="op">=</span><span class="va">name_en</span><span class="op">)</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    fontface <span class="op">=</span> <span class="st">"bold"</span>,</span>
<span>    family <span class="op">=</span> <span class="st">"serif"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"grey30"</span>,</span>
<span>    nudge_x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">25</span><span class="op">)</span>,</span>
<span>    nudge_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="op">-</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">#Add scale bar to bottom left from ggspatial</span></span>
<span>    <span class="fu"><a href="https://paleolimbot.github.io/ggspatial/reference/annotation_scale.html">annotation_scale</a></span><span class="op">(</span>location <span class="op">=</span> <span class="st">"bl"</span>, </span>
<span>      height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">.25</span>, <span class="st">"cm"</span><span class="op">)</span>, </span>
<span>      pad_x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="st">"in"</span><span class="op">)</span>, </span>
<span>      pad_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="st">"in"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co">#Add north arrow to bottom left from ggspatial</span></span>
<span>    <span class="fu"><a href="https://paleolimbot.github.io/ggspatial/reference/annotation_north_arrow.html">annotation_north_arrow</a></span><span class="op">(</span>height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"cm"</span><span class="op">)</span>, </span>
<span>      width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>      which_north <span class="op">=</span> <span class="st">"true"</span>, </span>
<span>      location <span class="op">=</span> <span class="st">"bl"</span>, </span>
<span>      pad_x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"in"</span><span class="op">)</span>, </span>
<span>      pad_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="st">"in"</span><span class="op">)</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I will use the grid package to make an inset with the viewport function.</p>
<div class="cell">
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">vp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/viewport.html">viewport</a></span><span class="op">(</span> x<span class="op">=</span><span class="fl">0.75</span>,   <span class="co"># from grid package</span></span>
<span>        y<span class="op">=</span><span class="fl">0.75</span>,</span>
<span>                width<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">3</span>, <span class="st">"inches"</span><span class="op">)</span>,</span>
<span>                height<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">2</span>,<span class="st">"inches"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grid/grid.show.viewport.html">grid.show.viewport</a></span><span class="op">(</span><span class="va">vp</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">baseplot</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data</code></pre>
</div>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">inset</span>, vp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/viewport.html">viewport</a></span><span class="op">(</span><span class="fl">0.75</span>, <span class="fl">0.78</span>, width <span class="op">=</span> <span class="fl">0.4</span>, height <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span><span class="op">)</span>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-20-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="write-to-an-external-file" class="level3"><h3 class="anchored" data-anchor-id="write-to-an-external-file">Write to an external file</h3>
<p>There are two print statements here after starting the png device (you can also turn on a pdf if you wish)</p>
<div class="cell">
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">height</span><span class="op">=</span><span class="fl">6</span></span>
<span><span class="va">width</span><span class="op">=</span><span class="fl">9</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span><span class="op">(</span>file<span class="op">=</span><span class="st">"map.png"</span>, <span class="co"># for png format you have to specify </span></span>
<span>                    <span class="co"># size and resolution</span></span>
<span>    height<span class="op">=</span><span class="va">height</span>, </span>
<span>    width<span class="op">=</span><span class="va">width</span>, </span>
<span>    units<span class="op">=</span><span class="st">"in"</span>, </span>
<span>    res<span class="op">=</span><span class="fl">300</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">baseplot</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not
give correct results for longitude/latitude data</code></pre>
</div>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>      <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">inset</span>, vp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/viewport.html">viewport</a></span><span class="op">(</span><span class="fl">0.75</span>, <span class="fl">0.78</span>, width <span class="op">=</span> <span class="fl">0.4</span>, height <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span><span class="op">)</span>  </span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>quartz_off_screen 
                2 </code></pre>
</div>
</div>
</section></section></section><section id="cool-tip" class="level1"><h1>Cool tip!</h1>
<div class="cell">
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/show_col.html">show_col</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#9DBF9E"</span>, <span class="st">"#A84268"</span>, <span class="st">"#FCB97D"</span>, <span class="st">"#C0BCB5"</span>, <span class="st">"#4A6C6F"</span>, <span class="st">"#FF5E5B"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="great-mapping-blogs" class="level1"><h1>Great Mapping Blogs</h1>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/mbutler808\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>